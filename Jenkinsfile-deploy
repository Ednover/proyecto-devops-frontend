pipeline{
    parameters{
        string(name: 'GIT_BRANCH', defaultValue: 'develops', description: 'Git branch to build')
        string(name: 'BUILD_NUMBER', defaultValue: '00', description: 'Build number')
    }
    stage('Remove containers'){
        steps{
            sh 'docker ps -aq | xargs docker stop | xargs docker rm' 
        }
    }
    stage('Build image'){
        steps{
            sh 'docker build -t devops-frontend-$GIT_BRANCH:1.0.$BUILD_NUMBER'
        }
    }
    stage('Deploy'){
        steps{
            sh 'npm run dev'
        }
    }
}